
import java.awt.event.KeyEvent;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
/**
 *
 * @author Pramo
 */
public class DateChooser extends javax.swing.JPanel {

    Date_Handler date_handler = new Date_Handler();
    DatabaseManager dbm = DatabaseManager.getDbCon();
    Search srch = new Search();

    /**
     * Creates new form DateChooser
     */
    public DateChooser() {
        initComponents();
        

    }
    
     public void focus() {
        this.requestFocusInWindow();
        jComboBox3.requestFocusInWindow();
     
       
    }
     
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        calendarPane1 = new com.michaelbaranov.microba.calendar.CalendarPane();
        jComboBox1 = new javax.swing.JComboBox();
        jComboBox2 = new javax.swing.JComboBox();
        jComboBox3 = new javax.swing.JComboBox();
        jComboBox4 = new javax.swing.JComboBox();
        jTextField1 = new javax.swing.JTextField();

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "---", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "----" }));
        jComboBox1.setSelectedItem(date_handler.get_today_month()
        );
        jComboBox1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jComboBox1KeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jComboBox1KeyReleased(evt);
            }
        });

        jComboBox2.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024", "2025", "2026", "2027", "2028", "2929", "2030" }));
        jComboBox2.setSelectedItem(date_handler.get_today_year()
        );
        jComboBox2.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jComboBox2KeyPressed(evt);
            }
        });

        jComboBox3.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "----", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "---" }));
        jComboBox3.setSelectedItem(date_handler.get_today_day());
        jComboBox3.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jComboBox3KeyPressed(evt);
            }
        });

        jComboBox4.setEditable(true);
        jComboBox4.setModel(new javax.swing.DefaultComboBoxModel(dbm.getStringArray("category", "category_id")));
        jComboBox4.addPopupMenuListener(new javax.swing.event.PopupMenuListener() {
            public void popupMenuCanceled(javax.swing.event.PopupMenuEvent evt) {
            }
            public void popupMenuWillBecomeInvisible(javax.swing.event.PopupMenuEvent evt) {
            }
            public void popupMenuWillBecomeVisible(javax.swing.event.PopupMenuEvent evt) {
                jComboBox4PopupMenuWillBecomeVisible(evt);
            }
        });
        jComboBox4.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jComboBox4KeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jComboBox4KeyTyped(evt);
            }
        });

        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });
        jTextField1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextField1KeyReleased(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jComboBox3, javax.swing.GroupLayout.PREFERRED_SIZE, 55, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jComboBox2, javax.swing.GroupLayout.PREFERRED_SIZE, 61, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(59, 59, 59)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jComboBox4, javax.swing.GroupLayout.PREFERRED_SIZE, 267, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 248, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addContainerGap(81, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(12, 12, 12)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jComboBox2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jComboBox3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(71, 71, 71)
                .addComponent(jComboBox4, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(31, 31, 31)
                .addComponent(jTextField1, javax.swing.GroupLayout.DEFAULT_SIZE, 41, Short.MAX_VALUE)
                .addContainerGap())
        );
    }// </editor-fold>//GEN-END:initComponents

    private void jComboBox1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox1KeyPressed
        if (jComboBox1.getSelectedItem().toString().equals("Jan")) {
            if (evt.getKeyCode() == KeyEvent.VK_UP) {
                jComboBox1.setSelectedItem("----");
                int yr = jComboBox2.getSelectedIndex();
                if (yr > -1) {
                    jComboBox2.setSelectedIndex(yr - 1);
                }
            }

        } else if (jComboBox1.getSelectedItem().toString().equals("Dec")) {
            if (evt.getKeyCode() == KeyEvent.VK_DOWN) {
                jComboBox1.setSelectedItem("---");
                int yr = jComboBox2.getSelectedIndex();
                if (yr < 22) {
                    jComboBox2.setSelectedIndex(yr + 1);
                }
            }

        }
         if (evt.getKeyCode() == KeyEvent.VK_RIGHT) {
               jComboBox2.requestFocus();
         }
         if (evt.getKeyCode() == KeyEvent.VK_LEFT) {
               jComboBox3.requestFocus();
         }
         
          if(evt.getKeyCode()==KeyEvent.VK_ENTER)
        {
            this.requestFocusInWindow();
        }
         
    }//GEN-LAST:event_jComboBox1KeyPressed

    private void jComboBox1KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox1KeyReleased

    }//GEN-LAST:event_jComboBox1KeyReleased

    private void jComboBox3KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox3KeyPressed
        if (jComboBox3.getSelectedItem().toString().equals("1")) {
            if (evt.getKeyCode() == KeyEvent.VK_UP) {
                if (jComboBox1.getSelectedItem().toString().equals("Feb") || jComboBox1.getSelectedItem().toString().equals("Apr") || jComboBox1.getSelectedItem().toString().equals("Jun") || jComboBox1.getSelectedItem().toString().equals("Aug") || jComboBox1.getSelectedItem().toString().equals("Sep") || jComboBox1.getSelectedItem().toString().equals("Nov") || jComboBox1.getSelectedItem().toString().equals("Feb")) {
                    jComboBox3.setSelectedIndex(32);
                    int mnth = jComboBox1.getSelectedIndex();
                    jComboBox1.setSelectedIndex(mnth - 1);

                } else if (jComboBox1.getSelectedItem().toString().equals("May") || jComboBox1.getSelectedItem().toString().equals("Jul") || jComboBox1.getSelectedItem().toString().equals("Oct") || jComboBox1.getSelectedItem().toString().equals("Dec")) {
                    jComboBox3.setSelectedIndex(31);
                    int mnth = jComboBox1.getSelectedIndex();
                    jComboBox1.setSelectedIndex(mnth - 1);

                } else if (jComboBox1.getSelectedItem().toString().equals("Mar")) {
                    int yr = Integer.parseInt(jComboBox2.getSelectedItem().toString());
                    if (yr % 4 == 0) {
                        if (yr % 100 == 0) {
                            if (yr % 400 == 0) {
                                jComboBox3.setSelectedIndex(30); // Leap Year
                            }
                        }
                        if (yr % 100 == 0) {
                            if (yr % 400 != 0) {
                                jComboBox3.setSelectedIndex(29); // not a leap year
                            }
                        }
                        jComboBox3.setSelectedIndex(30);       // leap year

                    }
                    if (yr % 4 != 0) {
                        jComboBox3.setSelectedIndex(29);       // not a leap year
                    }
                    int mnth = jComboBox1.getSelectedIndex();
                    jComboBox1.setSelectedIndex(mnth - 1);

                } else if (jComboBox1.getSelectedItem().toString().equals("Jan")) {
                    jComboBox3.setSelectedIndex(32);

                    int yr = jComboBox2.getSelectedIndex();
                    jComboBox1.setSelectedIndex(12);
                    jComboBox2.setSelectedIndex(yr - 1);
                }

            }
        }

        if (jComboBox3.getSelectedItem().toString().equals("28")) {
            if (evt.getKeyCode() == KeyEvent.VK_DOWN) {
                if (jComboBox1.getSelectedItem().toString().equals("Feb")) {
                    int yr = Integer.parseInt(jComboBox2.getSelectedItem().toString());
                    if (yr % 4 == 0) {
                        if (yr % 100 == 0) {
                            if (yr % 400 == 0) {
                                jComboBox3.setSelectedIndex(30);
                            }
                        }
                        if (yr % 100 == 0) {
                            if (yr % 400 != 0) {
                                jComboBox3.setSelectedIndex(0);

                                jComboBox1.setSelectedIndex(3);
                            }
                        }
                        jComboBox3.setSelectedIndex(28);

                    }
                    if (yr % 4 != 0) {
                        jComboBox3.setSelectedIndex(0);

                        jComboBox1.setSelectedIndex(3);
                    }

                }
            }

        }
        
        
        if (jComboBox3.getSelectedItem().toString().equals("29")) {
            if (evt.getKeyCode() == KeyEvent.VK_DOWN) {
                if (jComboBox1.getSelectedItem().toString().equals("Feb")) {
                    jComboBox3.setSelectedIndex(0);
                      jComboBox1.setSelectedIndex(3);
                }
            }
        }

        

        if (jComboBox3.getSelectedItem().toString().equals("30")) {
            if (evt.getKeyCode() == KeyEvent.VK_DOWN) {
                if (jComboBox1.getSelectedItem().toString().equals("Apr") || jComboBox1.getSelectedItem().toString().equals("Jun") || jComboBox1.getSelectedItem().toString().equals("Sep") || jComboBox1.getSelectedItem().toString().equals("Nov")) {
                    jComboBox3.setSelectedIndex(0);
                    int mnth = jComboBox1.getSelectedIndex();
                    jComboBox1.setSelectedIndex(mnth + 1);

                }
            }
        }

        if (jComboBox3.getSelectedItem().toString().equals("31")) {
            if (evt.getKeyCode() == KeyEvent.VK_DOWN) {
                if (jComboBox1.getSelectedItem().toString().equals("Jan") || jComboBox1.getSelectedItem().toString().equals("Mar") || jComboBox1.getSelectedItem().toString().equals("May") || jComboBox1.getSelectedItem().toString().equals("Jul") || jComboBox1.getSelectedItem().toString().equals("Aug") || jComboBox1.getSelectedItem().toString().equals("Oct")) {
                    jComboBox3.setSelectedIndex(0);
                    int mnth = jComboBox1.getSelectedIndex();
                    jComboBox1.setSelectedIndex(mnth + 1);

                } else if (jComboBox1.getSelectedItem().toString().equals("Dec")) {
                    jComboBox3.setSelectedIndex(0);

                    int yr = jComboBox2.getSelectedIndex();
                    jComboBox1.setSelectedIndex(1);
                    jComboBox2.setSelectedIndex(yr + 1);
                }

            }
        }
        
         if (evt.getKeyCode() == KeyEvent.VK_RIGHT) {
         
         jComboBox1.requestFocus();
         }
         
           if(evt.getKeyCode()==KeyEvent.VK_ENTER)
        {
            this.requestFocusInWindow();
        }
    }//GEN-LAST:event_jComboBox3KeyPressed

    private void jComboBox2KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox2KeyPressed
       if (evt.getKeyCode() == KeyEvent.VK_LEFT) {
               jComboBox1.requestFocus();
         }
       
         if(evt.getKeyCode()==KeyEvent.VK_ENTER)
        {
            this.requestFocusInWindow();
        }
    }//GEN-LAST:event_jComboBox2KeyPressed

    private void jComboBox4KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox4KeyPressed
        System.out.println("pressed");
    }//GEN-LAST:event_jComboBox4KeyPressed

    private void jComboBox4KeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox4KeyTyped
       System.out.println("pressed");
    }//GEN-LAST:event_jComboBox4KeyTyped

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField1ActionPerformed

    private void jTextField1KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField1KeyReleased
       jTextField1.setText(srch.Suggestions("user_data", "user_name", jTextField1.getText()));
    }//GEN-LAST:event_jTextField1KeyReleased

    private void jComboBox4PopupMenuWillBecomeVisible(javax.swing.event.PopupMenuEvent evt) {//GEN-FIRST:event_jComboBox4PopupMenuWillBecomeVisible
        
    }//GEN-LAST:event_jComboBox4PopupMenuWillBecomeVisible


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private com.michaelbaranov.microba.calendar.CalendarPane calendarPane1;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JComboBox jComboBox2;
    private javax.swing.JComboBox jComboBox3;
    private javax.swing.JComboBox jComboBox4;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration//GEN-END:variables
}
